<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>D3 Test</title>
        <script src="./lib/d3.js" charset="utf-8"></script>
        <script src="./lib/topojson.js" charset="utf-8"></script>
    </head>
<body>
<p></p>
<script type="text/javascript">

var width = 2500;
var height = 640;
var svg = d3.select("body").append("svg")
  .attr("width",
 width)
  .attr("height",
 height);
var p = d3.select("body p");



d3.json("./lib/world.topojson",function(data){
  var world = topojson.feature(data,
 data.objects.world);

  var projection = d3.geoMercator()
    .center([0,34])
    .translate([350, 320])
    .rotate([-10, 0])
    .scale(100);

  var path = d3.geoPath().projection(projection);
    var path2 = d3.geoPath().projection(projection);

  var Af_x;

  console.log(data);
  var jajaja = svg.selectAll("path")
    .data(world.features)
    .enter()
    .append("path")
    .attr("class", function(d){
      if(d.properties.name=="Afghanistan"){
        console.log(d);
        // console.log("");
      }
      var nam = d.properties.name;
      return nam;
    })
    .attr("fill","steelblue")
    .attr("d", path)
    .on("click",function(a,b,c){
      svg.selectAll("path")
      .attr("fill", "steelblue");
      console.log(a);
      svg.selectAll("path."+a.properties.name)
      .attr("fill",function(d){
        console.log(d);
        return "black";
        // return "black";
      });
      // console.log(a.properties.name);
    });

  jajaja.datum(function(d){
    console.log(d);
    var coord = d.geometry.coordinates;
    var x=0;
    var y=0;
    var i = 0;
    coord[0].forEach(function(a){
        x = x + a[0];
        y = y + a[1];
        i = i+1;
    });
    x = x/i;
    y = y/i;
    var arr = [];
    arr.push(x);
    arr.push(y);
    if(isNaN(arr[0])){
      x = 0;
      y = 0;
      i = 0;
      coord[0][0].forEach(function(a){
        x = x + a[0];
        y = y+ a[1];
        i = i+1;
      });
      x = x/i;
      y = y/i;
      arr.splice(0,arr.length);
      arr.push(x);
      arr.push(y);
    }
    console.log(arr);
    svg.append("circle")
      .attr("transform",
 function(d){ return "translate(" + projection(arr) + ")";})
      .attr("r",
 2);
return d;
  });
// console.log("x");
//   var jajaje = svg.selectAll("path")
//     .data(world.features)
//     .enter()
//     .append("path")
//     .attr("class",
 // function(d){
//       if(d.properties.name=="Afghanistan"){
//         console.log("x");
//         // console.log("");
//       }
//       console.log("vvv")
//       return "vvv";
//     })
//     .attr("fill",
 // "red")
//     .attr("d",
//  path2);
// console.log("y")
//   var circle = svg.append("circle")
//                   .attr("cx",
//  439.37)
//                   .attr("cy",
//  316.49)
//                   .attr("r",
//  1)
//                   .attr("fill",
//  "steelblue");
});


</script>
</body></html>
